<%
begin
  fname = @login.user.preference('step3.fname', '', params[:fname])
  lname = @login.user.preference('step3.lname', '', params[:lname])
  email = @login.user.preference('step3.email', '', params[:email])
  passw = @login.user.preference('step3.passw', '', params[:passw])
  
  # url to go after filter
  url = BlackStack::Funnel.url_after_login(@login, 'funnels.main')
  # go to done wizard
  redirect url
rescue => e
  redirect "/step3?err="+ CGI::escape(e.message)
end
%>